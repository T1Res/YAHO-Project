<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>애니메이션 목록</title>
    <link rel="stylesheet" href="/CSS/test.css">
    <link rel="stylesheet" href="/CSS/style.css">
    <script src="https://kit.fontawesome.com/071aa8f784.js" crossorigin="anonymous"></script>
</head>
<body>
  <div class="nav">
    <img src="/IMG/logo_test1.png" alt="" onclick="location.href='/Schedule/animeSchedule'">
    <div class="navitem" onclick="location.href='/Main'">홈</div>
    <div class="navitem" onclick="location.href='/List/List_list'">전체 애니</div>
    <div class="navitem" onclick="location.href='/Schedule/animeSchedule'">방영중 애니</div>
    <div class="navitem">자유게시판</div>
    <div class="navitem" onclick="location.href='/Admin/list'">관리자</div>
  </div>

  <br><br>

  <div class="main-layout">
    <!-- ✅ 사이드바 -->
    <aside class="sidebar">
      <form class="search-box" action="post" method="get" id="search-form">
        <input class="search-txt" type="text" name="keyword" id="search-input" placeholder="검색어를 입력하세요">
        <button class="search-btn" type="submit">
          <i class="fa-duotone fa-solid fa-magnifying-glass"></i>
        </button>
      </form>

      <!-- Tags Start -->
      <div class="tag-section">
        <div class="tag-header">
          <h3 class="tag-title">애니메이션 등록</h3>
        </div>
        <div class="tag-list">
          <!-- 등록 버튼 -->
          <a href="#" class="tag-btn" id="openInsertModal" style="width: 100%; text-align: center; margin-bottom: 10px;">등록</a>

          <!-- ✅ 등록 모달 -->
          <div id="insertModal" class="modal">
            <div class="modal-content">
              <span class="close-t">&times;</span>
              <form action="/Admin/insert" method="post" enctype="multipart/form-data">
                <label for="TITLE">제목</label><br>
                <input type="text" id="TITLE" name="TITLE" required><br><br>

                <label for="THUMNAIL_GARO_URL">가로 이미지</label><br>
                <input type="file" id="THUMNAIL_GARO_URL" name="THUMNAIL_GARO_URL" accept="image/*" onchange="previewImage(this, 'garoPreview')"><br>
                <img id="garoPreview" style="max-width: 200px; display: none; margin-top: 10px;"><br><br>

                <label for="THUMNAIL_SERO_URL">세로 이미지</label><br>
                <input type="file" id="THUMNAIL_SERO_URL" name="THUMNAIL_SERO_URL" accept="image/*" onchange="previewImage(this, 'seroPreview')"><br>
                <img id="seroPreview" style="max-height: 300px; display: none; margin-top: 10px;"><br><br>

                <label>요일 (중복 선택 가능)</label><br>
                <input type="checkbox" name="WEEKDAY" value="월요일"> 월요일
                <input type="checkbox" name="WEEKDAY" value="화요일"> 화요일
                <input type="checkbox" name="WEEKDAY" value="수요일"> 수요일
                <input type="checkbox" name="WEEKDAY" value="목요일"> 목요일
                <input type="checkbox" name="WEEKDAY" value="금요일"> 금요일
                <input type="checkbox" name="WEEKDAY" value="토요일"> 토요일
                <input type="checkbox" name="WEEKDAY" value="일요일"> 일요일<br><br>

                <label for="SCORE">별점 (0.0 ~ 5.0)</label><br>
                <input type="number" id="SCORE" name="SCORE" step="0.5" min="0" max="5" value="0" onkeydown="return false;" onfocus="this.blur();"><br><br>

                <label for="TAGS">태그 (장르)</label><br>
                <input type="text" id="TAGS" name="TAGS" placeholder="예: 판타지,액션"><br><br>

                <button type="submit">등록</button>
              </form>
            </div>
          </div>

          <!-- 상세 정보 등록 -->
          <a href="#" id="openInfoInsertModal" class="tag-btn" style="width: 100%; text-align: center; margin-bottom: 10px;">상세 정보 등록</a>
          <div id="infoInsertModal" class="modal">
            <div class="modal-content">
              <span class="close-info">&times;</span>
              <form action="/Admin/insert_info" method="post">
                <label for="ANIME_ID">애니 번호(mysql과 동일)</label><br>
                <input type="text" id="ANIME_ID" name="ANIME_ID" required><br><br>

                <label for="ANIME_DESC">줄거리</label><br>
                <textarea id="ANIME_DESC" name="ANIME_DESC" rows="5" cols="40" required></textarea><br><br>

                <label for="START_DATE">방영 시작일</label><br>
                <input type="text" id="START_DATE" name="START_DATE"><br><br>

                <label for="TOTAL_EPISODE">총 회차수</label><br>
                <input type="text" id="TOTAL_EPISODE" name="TOTAL_EPISODE"><br><br>

                <label for="CURRENT_EPISODE">현재 회차</label><br>
                <input type="text" id="CURRENT_EPISODE" name="CURRENT_EPISODE"><br><br>

                <label for="ANIME_SCORE">별점 (0.0 ~ 5.0)</label><br>
                <input type="number" id="ANIME_SCORE" name="ANIME_SCORE" step="0.5" min="0" max="5" value="0" onkeydown="return false;" onfocus="this.blur();"><br><br>

                <label for="AGE_RATING">관람등급</label><br>
                <input type="text" id="AGE_RATING" name="AGE_RATING"><br><br>

                <button type="submit">등록</button>
              </form>
            </div>
          </div>
          
          
        </div>
      </div>
      <!-- Tags End -->
    </aside>

    <!-- ✅ 콘텐츠 영역 -->
    <div class="content-area">
      <div class="sort-bar">
        <div class="sort-dropdown">
          <button class="sort-toggle">
            <span class="current-sort">인기순</span> <span class="arrow">▴</span>
          </button>
          <ul class="sort-menu">
            <li class="selected" data-sort="popular">인기순</li>
            <li data-sort="asc">오름차순(A~ㅎ)</li>
            <li data-sort="desc">내림차순(ㅎ~A)</li>
            <li data-sort="new">신작순</li>
            <li data-sort="update">업데이트순</li>
            <li data-sort="review">리뷰 많은순</li>
            <li data-sort="rating">별점 높은순</li>
          </ul>
        </div>
      </div>

      <!-- 카드 목록 -->
	    <div class="anime-title-card-list">
	    	<div class="anime-title-card" th:each="anime : ${animeList}"
			    th:data-title="${anime.TITLE}" 
			    th:text="${anime.TITLE}"></div>
			</div>
	    </div>
	  </div>
	<!-- 애니 제목 클릭하면 뜨는 수정 모달 -->
<div id="animeModal" class="modal">
  <div class="modal-content">
    <span class="close-modal">&times;</span>
    <h2 id="modalTitle">애니 제목 수정</h2>
    
    <!-- 폼 하나로 합치기 -->
    <form action="/Admin/updateAll" method="post" enctype="multipart/form-data">
      <!-- 기본 정보 수정 -->
      <h3>기본 정보 수정</h3>
      <input type="hidden" id="ANIME_ID" name="ANIME_ID" required> <!-- 수정할 때 ID 필요 -->

      <label for="TITLE">제목</label><br>
      <input type="text" id="TITLE" name="TITLE" required><br><br>

      <label for="THUMNAIL_GARO_URL">가로 이미지</label><br>
      <input type="file" id="THUMNAIL_GARO_URL" name="THUMNAIL_GARO_URL" accept="image/*" onchange="previewImage(this, 'garoPreview')"><br>
      <img id="garoPreview" style="max-width: 200px; display: none; margin-top: 10px;"><br><br>

      <label for="THUMNAIL_SERO_URL">세로 이미지</label><br>
      <input type="file" id="THUMNAIL_SERO_URL" name="THUMNAIL_SERO_URL" accept="image/*" onchange="previewImage(this, 'seroPreview')"><br>
      <img id="seroPreview" style="max-height: 300px; display: none; margin-top: 10px;"><br><br>

      <label>요일 (중복 선택 가능)</label><br>
      <input type="checkbox" name="WEEKDAY" value="월요일"> 월요일
      <input type="checkbox" name="WEEKDAY" value="화요일"> 화요일
      <input type="checkbox" name="WEEKDAY" value="수요일"> 수요일
      <input type="checkbox" name="WEEKDAY" value="목요일"> 목요일
      <input type="checkbox" name="WEEKDAY" value="금요일"> 금요일
      <input type="checkbox" name="WEEKDAY" value="토요일"> 토요일
      <input type="checkbox" name="WEEKDAY" value="일요일"> 일요일<br><br>

      <label for="SCORE">별점 (0.0 ~ 5.0)</label><br>
      <input type="number" id="SCORE" name="SCORE" step="0.5" min="0" max="5" value="0" onkeydown="return false;" onfocus="this.blur();"><br><br>

      <label for="TAGS">태그 (장르)</label><br>
      <input type="text" id="TAGS" name="TAGS" placeholder="예: 판타지,액션"><br><br>

      <!-- 상세 정보 수정 -->
      <h3>상세 정보 수정</h3>

      <label for="ANIME_DESC">줄거리</label><br>
      <textarea id="ANIME_DESC" name="ANIME_DESC" rows="5" cols="40" required></textarea><br><br>

      <label for="START_DATE">방영 시작일</label><br>
      <input type="text" id="START_DATE" name="START_DATE"><br><br>

      <label for="TOTAL_EPISODE">총 회차수</label><br>
      <input type="text" id="TOTAL_EPISODE" name="TOTAL_EPISODE"><br><br>

      <label for="CURRENT_EPISODE">현재 회차</label><br>
      <input type="text" id="CURRENT_EPISODE" name="CURRENT_EPISODE"><br><br>

      <label for="ANIME_SCORE">별점 (0.0 ~ 5.0)</label><br>
      <input type="number" id="ANIME_SCORE" name="ANIME_SCORE" step="0.5" min="0" max="5" value="0" onkeydown="return false;" onfocus="this.blur();"><br><br>

      <label for="AGE_RATING">관람등급</label><br>
      <input type="text" id="AGE_RATING" name="AGE_RATING"><br><br>

      <!-- 하나의 버튼으로 전체 업데이트 -->
      <button type="submit">수정 완료</button>
    </form>
  </div>
</div>


</body>
<script>
    const dropdown = document.querySelector('.sort-dropdown');
    const toggleBtn = dropdown.querySelector('.sort-toggle');
    const sortMenu = dropdown.querySelector('.sort-menu');
    const sortItems = sortMenu.querySelectorAll('li');
    const currentSortText = dropdown.querySelector('.current-sort');

    // 드롭다운 열기/닫기
    toggleBtn.addEventListener('click', () => {
        dropdown.classList.toggle('open');
    });

    // 항목 클릭 시
    sortItems.forEach(item => {
        item.addEventListener('click', () => {
            // 기존 선택 해제
            sortItems.forEach(i => i.classList.remove('selected'));
            item.classList.add('selected');

            // 텍스트 표시 변경
            currentSortText.textContent = item.textContent;

            // 드롭다운 닫기
            dropdown.classList.remove('open');

            // 정렬 기준 값 추출
            const sortValue = item.getAttribute('data-sort');
            console.log("선택된 정렬 기준:", sortValue);

            // 정렬 함수 호출 (원하는 로직으로 연결)
            sortContent(sortValue);
        });
    });

    // 외부 클릭 시 닫기
    document.addEventListener('click', (e) => {
        if (!dropdown.contains(e.target)) {
            dropdown.classList.remove('open');
        }
    });

    // 예시: 콘텐츠 정렬 함수 (내용은 개발자가 정의)
    function sortContent(sortType) {
        // 예시용 출력
        console.log("정렬할 로직을 여기에 추가하세요. 현재 타입:", sortType);
        // 예: AJAX 호출 or DOM 정렬 등...
    }
</script>
<script>
  // "등록" 모달 열기
  document.getElementById("openInsertModal").onclick = function(e) {
    e.preventDefault();
    document.getElementById("insertModal").style.display = "block";
  };

  // "등록" 모달 닫기 (X 버튼)
  document.querySelector(".close-t").onclick = function() {
    document.getElementById("insertModal").style.display = "none";
  };

  // "상세정보 등록" 모달 열기
  document.getElementById("openInfoInsertModal").onclick = function(e) {
    e.preventDefault();
    document.getElementById("infoInsertModal").style.display = "block";
  };

  // "상세정보 등록" 모달 닫기 (X 버튼)
  document.querySelector(".close-info").onclick = function() {
    document.getElementById("infoInsertModal").style.display = "none";
  };
</script>

<script>
  // "애니 제목 클릭" 모달
  const modal = document.getElementById('animeModal');
  const modalTitle = document.getElementById('modalTitle');
  const closeModal = document.querySelector('.close-modal');
  const animeCards = document.querySelectorAll('.anime-title-card');

  // 제목 카드 클릭 시 모달 열기
  animeCards.forEach(card => {
    card.addEventListener('click', () => {
      const title = card.getAttribute('data-title');
      modalTitle.textContent = title;
      modal.style.display = 'block';
    });
  });

  // 모달 닫기 (X 버튼만 가능)
  closeModal.addEventListener('click', () => {
    modal.style.display = 'none';
  });
</script>


</html>
